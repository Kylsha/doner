<html>
    <link rel="icon" type="image/png" href="favicon.ico"/>
    <head>
        <meta charset=utf-8>
        <title>Doner</title>
    </head>
    <style>
    *{
        box-sizing:border-box;
    }
    body {
        max-width: 1024px;
        min-width: 1024px;
        margin: 0 auto;
        padding: 1rem;
        background-repeat: repeat;
        background-image: url("pics/pita1.png");
        word-wrap:break-word;
    }
    .center {
        text-align: left;
        padding: 10px;
        background-color: rgba(255, 221, 158, 0.699);
        border-radius: 16px;
        
    }
    .centerbtn {
        text-align: center;
    }
    #btn{
        padding: 10px;
    }
    #submitBtn{
        margin:10px;
        height: 50px;
        width: 100%;
        max-width: 100%;
        display:block
    }
    .txt_area:empty::before{
        content: "Задайте вопрос";
        color: gray;
    }
    .txt_area{
        margin:10px;
        border: 1px solid black;
        display: inline-block;
        overflow: hidden;
        resize: both;
        min-height: 50px;
        width: 100%;
        min-width: 100%;
        max-width: 100%;
        padding: 5px;
    }
    .zzlp{
        pointer-events: none;
        cursor: not-allowed;
        opacity: 0.65;
        user-select: none;
    }
    .txt_area:not(:empty) + .zzlp{
        pointer-events:auto;
        cursor: pointer;
        opacity: 1;
    }
    .zzlp:focus + .bts{
        display:block
    }
    .bts{
        margin: 10px;
        display:none
    }
    img{
        display: inline;
        vertical-align:middle
    }
    p{
        vertical-align:middle;
    }
    .pic_in{
        width: 100%;
    }
    .pic_settings{
        width: 35%;
        
    }
    #engswitch, #ruswitch, #splitter{
        font-size:24;
    }
    /* .widget__main-block {
        width: 1000px;
    }     */
    </style>
    <body>
        <div id="english" class="center">
            <div id="header">
                <h1 style="text-align:left;">Донер. Плагин для ГИС-приложений
                    <a id="engswitch" style="float:right;" href="/doner/eng.html">English</a>
                    <a id="splitter" style="float:right;"> | </a>
                    <a id="ruswitch" style="float:right;" href="/doner/rus.html">Русский</a>
                </h1>
            </div>
            
            <p>Донер – это плагин, созданный преимущественно для картографов с целью облегчить их работу. На сегодняшний день он поддерживается тремя ГИС-приложениями: ArcGIS, QGIS и MapInfo. Основная функция плагина – добавить окрашенную зону на карту, когда процесс цифровки/занесения или проверки атрибутов и геометрии окончен для определенной территории. Впоследствии пользователю не придется просматривать данную область еще раз.</p>
            <p>В плагине имеются три кнопки (в версии для MapInfo - четыре, ниже имеется объяснение):</p>
            <p><img src="pics/doner_add_big.png"> <strong>Add doner</strong> – добавить эллипс на текущий охват карты</p>
            <p><img src="pics/doner_cut_big.png"> <strong>Cut doner</strong> – вырезать эллипсом существующую геометрию слоя Doner</p>
            <p><img src="pics/doner_settings_big.png"> <strong>Settings</strong> – окно настроек, в котором пользователь может настроить ширину/высоту эллипса, включить/отключить форму круга и раскраски в полупрозрачный оранжевый цвет</p>
            <p><img src="pics/doner_crs_big.png"> <strong>Set CRS</strong> (только для MapInfo) – установить текущую систему координат для определения плагином корректных числовых значений</p>
            <p>Ссылки на скачивание плагина:</p>
            <ul>
                <li><p><strong>ArcGIS</strong>: <a href="https://github.com/Kylsha/doner/raw/main/apps/Doner.esriaddin">скачать</a></p></li>
                <li><p><strong>QGIS</strong>: <a href="https://github.com/Kylsha/doner/raw/main/apps/doner_qgis.zip">скачать</a></p></li>
                <li><p><strong>MapInfo</strong>: <a href="https://github.com/Kylsha/doner/raw/main/apps/doner_mapinfo.zip">скачать</a></p></li>
            </ul>
            <p>Все данные, которые создает плагин, расположены по пути <em>C:\Users\%username%\Documents\mapDoner</em>. После использования плагина создаются дополнительные папки по данному пути в зависимости от ГИС-приложения, которое Вы используете. Плагин создает два типа файлов: файл конфигурации плагина и слой Doner (*.shp для ArcGIS и QGIS, *.tab для MapInfo). Вам не требуется создавать ни папок, ни файлов, плагин делает это сам.</p>
            <h2>Видеоинструкция:</h2>
            <iframe width="100%" height="550" src="https://www.youtube.com/embed/C5PS-lSH6PA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <hr>
            <h2 id="arcgis">ArcGIS</h2>
            <h4>(Протестировано на версиях 10.2, 10.8)</h4>
            <h3>Установка:</h3>
            <ol>
                <li><p>Закройте ArcMap/ArcCatalog и установите плагин двойным щелчком по файлу <strong><em>Doner.esriaddin</em></strong>. Установка из приложения может не произойти по причине возможного несоответствия версии разработки плагина и версии приложения</p></li>
                <li><p>Откройте ArcMap. Если в окне программы не появились три кнопки плагина, пройдите по пути Customize – Customize Mode… и найдите в списке Donet toolbar. После установки флажка кнопки должны появиться</p></li>
                <li><p>Загрузите слои в рабочую зону либо откройте проект с уже имеющимися слоями</p></li>
                <li><p>Нажмите кнопку <strong>Add doner</strong>. Появится новый слой под названием Doner с уже имеющимся оранжевым овалом</p></li>
            </ol>
            <img class="pic_in" src="pics/scr_ag_1.png"> 
            <p>Многократно нажимая кнопку <img src="pics/doner_add_big.png"> <strong>Add doner</strong> в разных местах на карте, будет видно, как несколько эллипсов будут появляться и сразу объединяться в один объект в слое Doner.</p>
            <img class="pic_in" src="pics/scr_ag_2.png"> 
            <p><img src="pics/doner_cut_big.png"> <strong>Cut doner</strong> вырезает форму эллипса в существующем слое Doner, если с ним есть пересечение. Таким образом можно очистить весь слой и заново добавлять новые эллипсы.</p>
            <img class="pic_settings" src="pics/scr_ag_3.png"> 
            <p><img src="pics/doner_settings_big.png"> <strong>Doner settings</strong> позволяет пользователю настроить ширину и высоту эллипса в процентах относительно ширины/высоты охвата рабочей области. Данные параметры не могут быть текстовыми, нулем или отрицательными числами, необходимо вписать числа от 0 до 100. Можно также ввести числа больше 100, но при этом эллипс будет выходить за рамки охвата карты. Также пользователь может установить флажок в пункте Round для того, чтобы получаемая фигура была в форме круга, диаметр которого регулируется только при помощи параметра высоты. Флажок Paint автоматически окрашивает слой Doner (полупрозрачная оранжевая заливка без границы).</p>
            <p>После закрытия ArcMap шейп-файл слоя Doner будет расположен по пути <em>C:\Users\%username%\Documents\mapDoner\arcgis_doner</em>. Как только пользователь запустит ArcMap снова, при нажатии Add doner плагин продолжит использование данного слоя.</p>
            <hr>
            <h2 id="qgis">QGIS</h2>
            <h4>(Протестировано на версиях 3.x.x)</h4>
            <h3>Установка:</h3>
            <ol>
                <li><p>В окне QGIS откройте пункт меню Модули – Управление и установка модулей – Install from ZIP и укажите путь до файла <strong><em>doner.zip</em></strong>. Установите плагин</p></li>
                <li><p>Если в окне программы не появились три кнопки плагина, проверьте флажок напротив плагина в меню Модули – Управление и установка модулей в панели Установленные</p></li>
                <li><p>Загрузите слои в рабочую зону либо откройте проект с уже имеющимися слоями</p></li>
                <li><p>Нажмите кнопку <strong>Add doner</strong>. Появится новый слой под названием Doner с уже имеющимся оранжевым овалом</p></li>
            </ol>
            <img class="pic_in" src="pics/scr_qg_1.png"> 
            <p>Многократно нажимая кнопку <img src="pics/doner_add_big.png"> <strong>Add doner</strong> в разных местах на карте, будет видно, как несколько эллипсов будут появляться и сразу объединяться в один объект в слое Doner.</p>
            <img class="pic_in" src="pics/scr_qg_2.png"> 
            <p><img src="pics/doner_cut_big.png"> <strong>Cut doner</strong> вырезает форму эллипса в существующем слое Doner, если с ним есть пересечение. Таким образом можно очистить весь слой и заново добавлять новые эллипсы.</p>
            <img class="pic_settings" src="pics/scr_qg_2.png"> 
            <p><img src="pics/doner_settings_big.png"> <strong>Doner settings</strong> позволяет пользователю настроить ширину и высоту эллипса в процентах относительно ширины/высоты охвата рабочей области. Данные параметры не могут быть текстовыми, нулем или отрицательными числами, необходимо вписать числа от 0 до 100. Можно также ввести числа больше 100, но при этом эллипс будет выходить за рамки охвата карты. Также пользователь может установить флажок в пункте Round для того, чтобы получаемая фигура была в форме круга, диаметр которого регулируется только при помощи параметра высоты. Флажок Paint автоматически окрашивает слой Doner (полупрозрачная оранжевая заливка без границы).</p>
            <p>После закрытия QGIS шейп-файл слоя Doner будет расположен по пути <em>C:\Users\%username%\Documents\mapDoner\qgis_doner</em>. Как только пользователь запустит QGIS снова, при нажатии Add doner плагин продолжит использование данного слоя.</p>
            <hr>
            <h2 id="mapinfo">MapInfo</h2>
            <h4>(Протестировано на версиях Pro 15.0 64-bit, Pro 16.0 64-bit)</h4>
            <h3>Установка:</h3>
            <ol>
                <li><p>В окне MapInfo откройте панель Главная – Инструменты – Настройки – Зарегистрировать программу и укажите путь до файла <strong><em>doner.mbx</em></strong>. Также для того, чтобы отображались иконки плагина, необходимо, чтобы файл библиотеки <strong><em>DonerData.dll</em></strong></p></li>
                <li><p>Если в окне программы во вкладке Инструменты не появились четыре кнопки плагина, зайдите в панель Главная – Инструменты и во вкладке Зарегистрировано найдите Doner, запустите его кликом по иконке Загрузить инструмент(Запуск)</p></li>
                <li><p>Загрузите слои в рабочую зону либо откройте проект с уже имеющимися слоями</p></li>
                <li><p>Нажмите кнопку <strong>Add doner</strong>. Появится новый слой под названием Doner с уже имеющимся оранжевым овалом</p></li>
            </ol>
            <img class="pic_in" src="pics/scr_mi_1.png"> 
            <p>Многократно нажимая кнопку <img src="pics/doner_add_big.png"> <strong>Add doner</strong> в разных местах на карте, будет видно, как несколько эллипсов будут появляться и сразу объединяться в один объект в слое Doner.</p>
            <img class="pic_in" src="pics/scr_mi_2.png"> 
            <p><img src="pics/doner_cut_big.png"> <strong>Cut doner</strong> вырезает форму эллипса в существующем слое Doner, если с ним есть пересечение. Таким образом можно очистить весь слой и заново добавлять новые эллипсы. Пользователь также может наблюдать весь процесс вырезания геометрии, в том числе выборки и установки редактируемых объектов. Это происходит из-за специфики языка MapBasic, который не может напрямую править геометрию слоя.</p>
            <p><img src="pics/doner_crs_big.png"> <strong>Set CRS</strong> – это специальная кнопка для установки уникальной системы координат и границ окна карты. Данная кнопка добавлена по двум причинам. Первая связана с языком MapBasic, а именно с ограничением функции MapperInfo. В соответствии с руководством MapBasic, <em>"MapperInfo( ) не возвращает координат (например,. MINX, MAXX, MINY, MAXY) в единицах измерения, заданных на карте. Такие значения возвращаются либо в единицах внутренней координатной системы MapInfo Professional, действующей в рамках данного сеанса, либо в терминах координатной системы программы MapBasic, вызывающей данную функцию. Также, задание атрибута MAPPER_INFO_XYUNITS возвращает единицы, которые используются для показа положения указателя мыши на экране в строке состояний (устанавливается оператором Set Map Window Frontwindow)"</em>. Из-за этого плагин должен устанавливать систему координат для окна карты, что является причиной второй проблемы. MapInfo ограничивает количество уникальных систем координат 254 наименованиями во время непрерывной работы программы. Эта проблема ранее поднималась в обсуждениях и решения ей не было: изменения размера количества уникальных наименований или перезапись существующей проекции были недоступны. По этим причинам пришлось добавить дополнительную кнопку для одноразовой установки системы координат для плагина. Если необходимо добавить новую карту со слоем в другой проекции или сменить настройки проекта, нажатие кнопки установит новые границы и систему координат для работы плагина. После 253 уникальных настроек плагин выдаст предупреждение о превышении предельного числа уникальных систем координат и придется перезагрузить MapInfo.</p>
            <img class="pic_settings" src="pics/scr_mi_3.png"> 
            <p><img src="pics/doner_settings_big.png"> <strong>Doner settings</strong> позволяет пользователю настроить ширину и высоту эллипса в процентах относительно ширины/высоты охвата рабочей области. Данные параметры не могут быть текстовыми, нулем или отрицательными числами, необходимо вписать числа от 0 до 100. Можно также ввести числа больше 100, но при этом эллипс будет выходить за рамки охвата карты. Также пользователь может установить флажок в пункте Round для того, чтобы получаемая фигура была в форме круга, диаметр которого регулируется только при помощи параметра высоты. Флажок Paint автоматически окрашивает слой Doner (полупрозрачная оранжевая заливка без границы).</p>
            <p>После закрытия MapInfo файл-таблица *.tab слоя Doner будет расположен по пути <em>C:\Users\%username%\Documents\mapDoner\mapinfo_doner</em>. Как только пользователь запустит MapInfo снова, при нажатии Add doner плагин продолжит использование данного слоя.</p>
            <br>
            <hr>
            <h2 id="author">От автора</h2>
            <p>Меня зовут Павел и я создатель данного плагина. Плагин распространяется бесплатно, но буду рад, если вы <a href="https://my.qiwi.com/Pavel-PreWgfHejG" target="_blank">поддержите разработку</a> или распространите информацию о ней. Пишите по любым вопросам, багам и предложениям на следующие адреса:</p>
            <ul>
                <li ><p><strong>E-mail</strong>: <a href="mailto:pasha004@yandex.ru" target="_blank">pasha004@yandex.ru</a></p></li>
                <li ><p><strong>Facebook</strong>: <a href="https://www.facebook.com/profile.php?id=100002056762317" target="_blank">https://www.facebook.com/profile.php?id=100002056762317</a></p></li>
                <li ><p><strong>Telegram</strong>: <a href="https://t.me/PavelPereverzev" target="_blank">@PavelPereverzev</a></p></li>
            </ul>
            <br>
        </div>
    </body>
</html>